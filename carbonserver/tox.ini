[tox]
envlist = py38

[testenv:unit]
deps =
    pytest
    -rrequirements-test.txt

commands =
    pip install -e .
    python -m pytest -vv tests/api/routers/
    python -m pytest -vv tests/api/service/

recreate =
    false

[testenv:integration]
deps =
    pytest
    -rrequirements-test.txt
commands = python -m pytest -vv tests/api/integration/
# commands = python -m pytest -vv tests/api/integration/ -k test_api_user_signup
setenv =
    CODECARBON_API_URL = http://localhost:8008
    # docker local
    # DATABASE_URL = postgresql://codecarbon-user:supersecret@localhost:5480/codecarbon_db
    # Github Action
    DATABASE_URL = postgresql://codecarbon-user:supersecret@localhost:5432/codecarbon_db
